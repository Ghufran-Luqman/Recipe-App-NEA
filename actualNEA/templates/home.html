{% extends "layout.html" %}
{% block head %}
<title>Home Page</title>
<link rel="stylesheet" href="../static/maincss.css">
{% endblock %}

{% block body %}

<div class="sidebox">
    <form method="GET" action="/home" spellcheck="false">
        <input class="searchwing searchpos" placeholder="Filter with ingredients..." name="querying" id="querying" autocomplete="off">
        <input type="submit" hidden>
        <button id="reset" name="reset" value="reset" type="submit" class="reset resetbtn">Reset All Filters</button>
        <div class="filtercontainer">
        <p class="ingredients filtertitle">Filtered Ingredients:</p>
        <ul>
        <div class="filtingrds">
        {% for filter in querying %}
            <li><p class="ingredients querying">{{ filter }}</p></li>
        {% endfor %}
        </div>
        </ul>
        </div>

        <div class="namescontainer">
        <p class="ingredients filtertitle names">Filtered Names:</p>
        <div class="historysearch">
        <ul>
        {% if search_history %}
        <li><p class="ingredients querying">{{ search_history }}</p></li>
        {% endif %}
        </ul>
        </div>
        </div>

        <div class="time">
        <p class="ingredients">Time:</p>
        <input class="searchwing preptime" placeholder="Filter by prep-time..." name="preptime" id="preptime" autocomplete="off">
        <input class="searchwing cooktime" placeholder="Filter by cook-time..." name="cooktime" id="cooktime" autocomplete="off">
        <input class="searchwing totaltime" placeholder="Filter by total-time..." name="totaltime" id="totaltime" autocomplete="off">
        </div>
    </form>
    <form action="/lists">
        <button class="reset seelists">View Saved Recipes</button>
    </form>


</div>

{% if alert == "norecipes" %}
<script>
    alert("There are no recipes with that ingredient.")
    window.location.href = "/home"
</script>

{% elif alert == "norecipessearch" %}
<script>
    alert("There are no recipes with that name.")
    window.location.href = "/home"
</script>

{% elif alert == "nocriteria" %}
<script>
    alert("There are no recipes with that criteria.")
    window.location.href = "/home"
</script>

{% endif %}

<input type="checkbox" id="toggler" class="invis"/>
<form method="GET" action="/home" spellcheck="false">
    <input type="text" id="search" autocomplete="off" name="Query" class="search" placeholder="Search recipe...">
    <input type="submit" value="Search" hidden>
</form>

<p class="ingredients username">Welcome, {{ username }}!</p>

<form action="logout">
<button class="reset logout" id="logout" type='submit' name="logout">Logout</button>
</form>

<div class="temp" id="recipes">
<form method="POST">
{% set count = namespace(value=-1) %}
{% for item in newrecipelist %}
    {% set count.value = count.value + 1 %}
    <div class="container2" style="overflow:hidden">
        <a href="/{{ item }}">
            <button id="recipebutton" class="recipebutton" name="recipebutton" type="button"><p class="biggertext">{{ item }}</p><img class='image' src="{{ images[count.value] }}" alt="not working" width="100" height="100"><p>{{ times[count.value][0] }}, {{ times[count.value][1] }}, {{ times[count.value][2] }}</p></button>
        </a>
    </div>
    <br>
{% endfor %}
</form>
</div>
{% endblock %}